<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

<head>
    <!-- head, css, js... -->
    <div th:replace="~{fragments/config :: config}"></div>
    <!-- 페이지의 간결한 설명 -->
    <meta name="description" content="" />
    <!-- 작성자 -->
    <meta name="author" content="sung_ori" />
    <!-- 타이틀 -->
    <title></title>
</head>

<body class="d-flex flex-column h-100 bg-light">
<main class="flex-shrink-0">
    <!-- nav -->
    <div th:replace="~{fragments/navBar :: navBar}"></div>
    <!-- 페이지내용 -->
    <div class="container px-5 my-5">
        <div class="text-center mb-5">
        </div>
        <div class="row gx-5 justify-content-center">
            <div class="col-lg-11 col-xl-9 col-xxl-8">
                <!-- Detail Section-->
                <div>
                    <table class="table">
                        <thead>
                        </thead>
                        <tbody>
                        <tr>
                            <th scope="row">선거번호</th>
                            <td th:text="${election.electionidx}">0</td>
                        </tr>
                        <tr>
                            <th scope="row">선거 제목</th>
                            <td th:text="${election.title}">선거 제목</td>
                        </tr>
                        <tr>
                            <th scope="row"></th>
                            <td>
                                <img th:src="@{${'/posters/' + election.posterpath}}" alt="포스터 이미지" style="max-width: 250px; max-height: 250px;" />
                            </td>
                        </tr>
                        <tr>
                            <th scope="row">투표 그룹</th>
                            <td th:text="${election.grouptype.value}">투표 대상 그룹</td>
                        </tr>
                        <tr>
                            <th scope="row">진행 상황</th>
                            <td th:text="${election.progressKorean}">알 수 없음</td>
                        </tr>


                        </tbody>
                    </table>
                    <!-- 버튼 그룹 -->
                    <div class="mt-3 d-flex justify-content-between">
                        <!-- 목록 버튼 -->
                        <a th:href="@{/election/list}" class="btn btn-primary">목록</a>

                        <!-- 투표하기 버튼 -->
                        <a th:href="@{'/vote/' + ${election.electionidx}}" class="btn btn-success">투표하기</a>

                        <!-- 관리자 버튼 -->
                        <div sec:authorize="hasRole('ROLE_ADMIN')">
                            <a th:href="@{'/election/updateView/' + ${election.electionidx}}" class="btn btn-primary me-2">수정</a>
                            <form id="delete-form" th:action="@{'delete/' + ${election.electionidx}}" method="post" class="d-inline">
                                <input type="hidden" name="_method" value="delete" />
                                <button id="delete-btn" class="btn btn-danger">삭제</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- footer -->
<div th:replace="~{fragments/footer :: footer}"></div>
</body>

</html>
